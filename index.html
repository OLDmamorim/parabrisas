<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>EXPRESSGLASS ‚Ä¢ Rece√ß√£o material</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <header class="topbar">
    <h1 class="brand">EXPRESSGLASS</h1>
    <span id="viewBadge" class="badge">Mobile</span>
  </header>
  <p class="subtitle">Rece√ß√£o material</p>

  <!-- ===== MOBILE ===== -->
  <section id="mobileView" class="card card-main">
    <button id="helpBtn" class="help-chip" type="button">Instru√ß√µes</button>

    <div class="camera-block">
      <button id="btnCamera" class="camera-btn pulse" type="button" aria-label="Tirar foto">
        <!-- √çcone inline (n√£o falha) -->
        <svg viewBox="0 0 24 24" width="56" height="56" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
          <path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h3l2-3h8l2 3h3a2 2 0 0 1 2 2z"/>
          <circle cx="12" cy="14" r="4"/>
        </svg>
      </button>
      <input id="cameraInput" type="file" accept="image/*" capture="environment" hidden />
    </div>

    <h2 class="h-title">Rece√ß√£o de Material</h2>
    <p class="hint">
      Tira uma foto √† <b>etiqueta</b> do material. Inclui a <b>descri√ß√£o</b> e o <b>c√≥digo</b> se poss√≠vel.
    </p>

    <div id="mobileStatus" class="status"></div>

    <hr class="sep" />

    <div class="history-header">
      <h3 class="section-title">üìã √öltimas Capturas</h3>
      <button id="historyClearBtn" class="btn danger" type="button">Limpar</button>
    </div>
    <div id="mobileHistoryList" class="history-list"></div>

    <p class="madefor">Feito para o Marco ‚Ä¢ Timezone: Europe/Lisbon</p>
  </section>

  <!-- ===== DESKTOP ===== -->
  <section id="desktopView" class="card card-desktop">
    <div class="toolbar">
      <button id="btnUpload" class="btn" type="button">Carregar imagem</button>
      <input id="fileInput" type="file" accept="image/*" hidden />
      <button id="btnExport" class="btn" type="button">Exportar CSV</button>
      <button id="btnClear" class="btn danger" type="button">Limpar Tabela</button>
      <button id="helpBtnDesktop" class="btn ghost" type="button">Instru√ß√µes</button>
    </div>

    <div id="desktopStatus" class="status"></div>

    <table id="resultsTable" class="table">
      <thead></thead>
      <tbody id="resultsBody"></tbody>
    </table>
  </section>

  <!-- ===== MODAL ===== -->
  <div id="helpModal" class="modal">
    <div class="modal-content">
      <button id="helpClose" class="modal-close" type="button">‚úï</button>
      <h3>Instru√ß√µes</h3>
      <ol>
        <li>No <b>Mobile</b>, toca no bot√£o da c√¢mara e fotografa a etiqueta/descri√ß√£o/c√≥digo.</li>
        <li>No <b>Desktop</b>, usa ‚ÄúCarregar imagem‚Äù.</li>
        <li>O texto lido √© gravado no Neon (Postgres). Podes apagar linhas no desktop.</li>
      </ol>
    </div>
  </div>

  <div id="toast" class="toast"></div>
  <script src="app.js"></script>
</body>
</html>